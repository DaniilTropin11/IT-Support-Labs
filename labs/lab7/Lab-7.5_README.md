# üß™ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ7.5

**–¢–µ–º–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è Zabbix —Å –ø–æ–º–æ—â—å—é Vagrant –∏
Ansible. –ë–µ–Ω—á–º–∞—Ä–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

------------------------------------------------------------------------

## üéØ –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–û—Å–≤–æ–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã Infrastructure as Code, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ç–µ–Ω–¥
Zabbix —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Vagrant –∏ Ansible –∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ
—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

------------------------------------------------------------------------

## üìö –ó–∞–¥–∞–Ω–∏—è

1.  –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –≤–∏–¥–µ–æ:\
    https://www.youtube.com/watch?v=oXHGc_MPOuE&list=PLdQohrQ3OmqS2wo9MwFKJtnXcVH5SCOh8&index=6

2.  –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–π —Å—Ç–µ–Ω–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Vagrant**:

    -   –°–æ–∑–¥–∞–π—Ç–µ `Vagrantfile` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥–Ω—è—Ç–∏—è –º–∏–Ω–∏–º—É–º –¥–≤—É—Ö
        –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω:
        -   Zabbix Server\
        -   Zabbix Agent\
    -   –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—É—é —Å–µ—Ç—å –º–µ–∂–¥—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏.\
    -   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —É–∑–ª–æ–≤ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–µ—Ç–µ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

3.  –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ **Ansible**:

    -   –°–æ–∑–¥–∞–π—Ç–µ inventory-—Ñ–∞–π–ª.\
    -   –†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ playbook –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
        -   Zabbix Server\
        -   Zabbix Agent\
        -   –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–ë–î, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Ç.–ø.).\
    -   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–æ–ª–∏ (role) –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞.\
    -   –û–±–µ—Å–ø–µ—á—å—Ç–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å playbook (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–µ –¥–æ–ª–∂–µ–Ω
        –ª–æ–º–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é).

4.  –ü—Ä–æ–≤–µ–¥–∏—Ç–µ –±–µ–Ω—á–º–∞—Ä–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

    -   –°–æ–∑–¥–∞–π—Ç–µ –Ω–∞–≥—Ä—É–∑–∫—É (—É–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö /
        —Ö–æ—Å—Ç–æ–≤).\
    -   –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ:
        -   values per second\
        -   queue\
        -   –∑–∞–≥—Ä—É–∑–∫—É poller-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤\
        -   –∑–∞–¥–µ—Ä–∂–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö\
    -   –ü—Ä–æ–≤–µ–¥–∏—Ç–µ –º–∏–Ω–∏–º—É–º –¥–≤–µ —Å–µ—Ä–∏–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä:
        1000 –∏ 3000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤).

5.  –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã:

    -   –ü—Ä–∏ –∫–∞–∫–æ–º –æ–±—ä—ë–º–µ –Ω–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã?\
    -   –ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zabbix –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å?\
    -   –ö–∞–∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±–ª–µ–≥—á–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã?

------------------------------------------------------------------------

## üìä –í –æ—Ç—á—ë—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç—Ä–∞–∑–∏—Ç—å

1.  –°—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞:

    -   Vagrantfile\
    -   inventory\
    -   playbook\
    -   roles

2.  –°–∫—Ä–∏–Ω—à–æ—Ç—ã:

    -   –ø–æ–¥–Ω—è—Ç—ã—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω\
    -   –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ansible-playbook\
    -   –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Zabbix\
    -   –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ

3.  –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–Ω—á–º–∞—Ä–∫–∞ (—Ç–∞–±–ª–∏—Ü–∞ –∏–ª–∏ –∫—Ä–∞—Ç–∫–∏–π –∞–Ω–∞–ª–∏–∑).

4.  –í—ã–≤–æ–¥—ã:

    -   –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Infrastructure as Code\
    -   –ø–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏\
    -   –ø–æ–≤–µ–¥–µ–Ω–∏–µ Zabbix –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

------------------------------------------------------------------------

## üìä –û—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ

  -----------------------------------------------------------------------
  –ë–∞–ª–ª                                –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
  ----------------------------------- -----------------------------------
  **3**                               –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–µ–Ω–¥
                                      (Vagrant + Ansible), –Ω–µ—Å–∫–æ–ª—å–∫–æ
                                      —Å–µ—Ä–∏–π –±–µ–Ω—á–º–∞—Ä–∫–∞, –ø–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑

  **2**                               –°—Ç–µ–Ω–¥ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
                                      —á–∞—Å—Ç–∏—á–Ω–∞—è, –±–µ–Ω—á–º–∞—Ä–∫ –ø—Ä–æ–≤–µ–¥—ë–Ω –±–µ–∑
                                      –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

  **1**                               –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –≤—Ä—É—á–Ω—É—é,
                                      –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è, –∞–Ω–∞–ª–∏–∑
                                      –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
  -----------------------------------------------------------------------

------------------------------------------------------------------------

## üõ° –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é (–∞–Ω—Ç–∏-–ø–ª–∞–≥–∏–∞—Ç)

1.  –ö–∞–∂–¥—ã–π —Å–∫—Ä–∏–Ω—à–æ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –§–ò–û —Å—Ç—É–¥–µ–Ω—Ç–∞, –≥—Ä—É–ø–ø—É –∏ –Ω–æ–º–µ—Ä —Ä–∞–±–æ—Ç—ã
    (–Ω–∞–ø—Ä–∏–º–µ—Ä: `echo "–§–ò–û, –≥—Ä.XXX, –õ–†7.5"`).\

2.  –ù–∞ –æ–¥–Ω–æ–º –∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –∫–æ–º–∞–Ω–¥—ã:

        whoami
        hostname

3.  –ó–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á—É–∂–∏—Ö playbook / Vagrantfile –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞
    —Ä–∞–±–æ—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ü–µ–Ω–µ–Ω–∞ –≤ 0 –±–∞–ª–ª–æ–≤.

------------------------------------------------------------------------

## üéì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

-   –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π—Ç–µ Ansible-–ø—Ä–æ–µ–∫—Ç (roles, tasks, handlers, templates).\
-   –ù–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ—Å—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π --- –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–≤–µ—Å—Ç–∏
    —Å–∏—Å—Ç–µ–º—É –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–µ–π.\
-   –î–µ–ª–∞–π—Ç–µ –∞–∫—Ü–µ–Ω—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ, –Ω–æ –∏ –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
